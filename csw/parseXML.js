var xpath = require('xpath')
    , dom = require('xmldom').DOMParser

//var xml = "<book xmlns='http://example.com/book'><title>Harry Potter</title></book>"
var xml = "<gmd:MD_Metadata xmlns='http://www.isotc211.org/2005/gmd' xmlns:gco='http://www.isotc211.org/2005/gco' xmlns:gmd='http://www.isotc211.org/2005/gmd' xmlns:gmi='http://www.isotc211.org/2005/gmi' xmlns:gml='http://www.opengis.net/gml' xmlns:gmx='http://www.isotc211.org/2005/gmx' xmlns:gts='http://www.isotc211.org/2005/gts' xmlns:srv='http://www.isotc211.org/2005/srv' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.isotc211.org/2005/gmd http://schemas.opengis.net/csw/2.0.2/profiles/apiso/1.0.0/apiso.xsd'><gmd:fileIdentifier><gco:CharacterString>90e5aa8a743c04160c055efb026ced8e</gco:CharacterString></gmd:fileIdentifier><gmd:language><gco:CharacterString>eng</gco:CharacterString></gmd:language><gmd:characterSet><gmd:MD_CharacterSetCode codeList='http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodelists.xml#MD_CharacterSetCode' codeListValue='utf8'>UTF-8</gmd:MD_CharacterSetCode></gmd:characterSet><gmd:hierarchyLevel><gmd:MD_ScopeCode codeList='http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodelists.xml#MD_ScopeCode' codeListValue='Dataset'>Dataset</gmd:MD_ScopeCode></gmd:hierarchyLevel><gmd:hierarchyLevelName><gco:CharacterString>collection:dataset</gco:CharacterString></gmd:hierarchyLevelName><gmd:contact><gmd:CI_ResponsibleParty><gmd:individualName><gco:CharacterString>Laura Bookman</gco:CharacterString></gmd:individualName><gmd:organisationName><gco:CharacterString>AZGS</gco:CharacterString></gmd:organisationName><gmd:positionName><gco:CharacterString>missing</gco:CharacterString></gmd:positionName><gmd:contactInfo><gmd:CI_Contact><gmd:phone><gmd:CI_Telephone><gmd:voice><gco:CharacterString>520-209-4154</gco:CharacterString></gmd:voice></gmd:CI_Telephone></gmd:phone><gmd:address><gmd:CI_Address><gmd:deliveryPoint><gco:CharacterString>416 W Congress Suite 100</gco:CharacterString></gmd:deliveryPoint><gmd:city><gco:CharacterString>Tucson</gco:CharacterString></gmd:city><gmd:administrativeArea><gco:CharacterString>AZ</gco:CharacterString></gmd:administrativeArea><gmd:postalCode><gco:CharacterString>85701</gco:CharacterString></gmd:postalCode><gmd:electronicMailAddress><gco:CharacterString>laura.bookman@azgs.az.gov</gco:CharacterString></gmd:electronicMailAddress></gmd:CI_Address></gmd:address></gmd:CI_Contact></gmd:contactInfo><gmd:role><gmd:CI_RoleCode codeList='http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodelists.xml#CI_RoleCode' codeListValue='pointOfContact'>pointOfContact</gmd:CI_RoleCode></gmd:role></gmd:CI_ResponsibleParty></gmd:contact><gmd:dateStamp><gco:DateTime>2014-12-11T18:31:56Z</gco:DateTime></gmd:dateStamp><gmd:metadataStandardName><gco:CharacterString>ISO-USGIN</gco:CharacterString></gmd:metadataStandardName><gmd:metadataStandardVersion><gco:CharacterString>1.2</gco:CharacterString></gmd:metadataStandardVersion><gmd:dataSetURI><gco:CharacterString/></gmd:dataSetURI><gmd:identificationInfo><gmd:MD_DataIdentification><gmd:citation><gmd:CI_Citation><gmd:title><gco:CharacterString>Hawaii Thermal Springs</gco:CharacterString></gmd:title><gmd:date><gmd:CI_Date><gmd:date><gco:DateTime>2013-11-18T00:00:00</gco:DateTime></gmd:date><gmd:dateType><gmd:CI_DateTypeCode codeList='http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode' codeListValue='publication'>publication</gmd:CI_DateTypeCode></gmd:dateType></gmd:CI_Date></gmd:date><gmd:citedResponsibleParty><gmd:CI_ResponsibleParty><gmd:individualName><gco:CharacterString/></gmd:individualName><gmd:organisationName><gco:CharacterString>University of Hawaii</gco:CharacterString></gmd:organisationName><gmd:positionName><gco:CharacterString>missing</gco:CharacterString></gmd:positionName><gmd:contactInfo><gmd:CI_Contact><gmd:phone><gmd:CI_Telephone><gmd:voice><gco:CharacterString>(808) 587-0214</gco:CharacterString></gmd:voice></gmd:CI_Telephone></gmd:phone><gmd:address><gmd:CI_Address><gmd:deliveryPoint><gco:CharacterString>1680 East West Rd., POST 602</gco:CharacterString></gmd:deliveryPoint><gmd:city><gco:CharacterString>Honolulu</gco:CharacterString></gmd:city><gmd:administrativeArea><gco:CharacterString>HI</gco:CharacterString></gmd:administrativeArea><gmd:postalCode><gco:CharacterString>96822</gco:CharacterString></gmd:postalCode><gmd:electronicMailAddress><gco:CharacterString>nlautze@soest.hawaii.edu</gco:CharacterString></gmd:electronicMailAddress></gmd:CI_Address></gmd:address></gmd:CI_Contact></gmd:contactInfo><gmd:role><gmd:CI_RoleCode codeList='http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodelists.xml#CI_RoleCode' codeListValue='originator'>originator</gmd:CI_RoleCode></gmd:role></gmd:CI_ResponsibleParty></gmd:citedResponsibleParty></gmd:CI_Citation></gmd:citation><gmd:abstract><gco:CharacterString>This resource is a compilation of thermal springs feature data including temperatures for the state of Hawaii, provided by the University of Hawaii, Hawaii Institute of Geophysics and Planetology. The data are available in the following formats: web feature service, web map service, ESRI service endpoint, and an Excel workbook for download. The workbook contains 4 worksheets, including information about the template with notes related to revisions of the template, resource provider information, the data, and a field list (to assist data mapping). This resource was compiled by the University of Hawaii, Hawaii Institute of Geophysics and Planetology and made available for distribution through the National Geothermal Data System.</gco:CharacterString></gmd:abstract><gmd:status><gmd:MD_ProgressCode codeList='http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodelists.xml#MD_ProgressCode' codeListValue='completed'>completed</gmd:MD_ProgressCode></gmd:status><gmd:descriptiveKeywords><gmd:MD_Keywords><gmd:keyword><gco:CharacterString>usgincm:thermal spring feature</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>usgincm:hot spring feature</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>temperature</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>geothermal system</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>hawaii</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>thermal springs</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>hot springs</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>geothermal</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>united states</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>usginres:collection:dataset</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>usginres:document:image:stillimage:human-generated image:map</gco:CharacterString></gmd:keyword><gmd:type><gmd:MD_KeywordTypeCode codeList='http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodelists.xml#MD_KeywordTypeCode' codeListValue='theme'>theme</gmd:MD_KeywordTypeCode></gmd:type></gmd:MD_Keywords></gmd:descriptiveKeywords><gmd:descriptiveKeywords><gmd:MD_Keywords><gmd:keyword><gco:CharacterString>Thermal Springs</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>WFS Services</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>WMS Services</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>Downloadable Files</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>ESRI Services</gco:CharacterString></gmd:keyword><gmd:keyword><gco:CharacterString>Temporary Node Web Services</gco:CharacterString></gmd:keyword><gmd:thesaurusName xlink:href='/metadata/collection/'><gmd:CI_Citation><gmd:title><gco:CharacterString>Server Collections</gco:CharacterString></gmd:title><gmd:date><gmd:CI_Date><gmd:date><gco:Date>2012-06-06</gco:Date></gmd:date><gmd:dateType><gmd:CI_DateTypeCode codeList='http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodelists.xml#CI_DateTypeCode' codeListValue='publication'/></gmd:dateType></gmd:CI_Date></gmd:date></gmd:CI_Citation></gmd:thesaurusName></gmd:MD_Keywords></gmd:descriptiveKeywords><gmd:language><gco:CharacterString>eng</gco:CharacterString></gmd:language><gmd:characterSet><gmd:MD_CharacterSetCode codeList='http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#MD_CharacterSetCode ' codeListValue='utf8'>UTF-8</gmd:MD_CharacterSetCode></gmd:characterSet><gmd:topicCategory><gmd:MD_TopicCategoryCode>geoscientificInformation</gmd:MD_TopicCategoryCode></gmd:topicCategory><gmd:extent><gmd:EX_Extent><gmd:geographicElement><gmd:EX_GeographicBoundingBox><gmd:westBoundLongitude><gco:Decimal>-160.576171875</gco:Decimal></gmd:westBoundLongitude><gmd:eastBoundLongitude><gco:Decimal>-154.423828125</gco:Decimal></gmd:eastBoundLongitude><gmd:southBoundLatitude><gco:Decimal>18.396230138028</gco:Decimal></gmd:southBoundLatitude><gmd:northBoundLatitude><gco:Decimal>23.160563309048</gco:Decimal></gmd:northBoundLatitude></gmd:EX_GeographicBoundingBox></gmd:geographicElement></gmd:EX_Extent></gmd:extent></gmd:MD_DataIdentification></gmd:identificationInfo><gmd:distributionInfo><gmd:MD_Distribution><gmd:distributor><gmd:MD_Distributor><gmd:distributorContact><gmd:CI_ResponsibleParty><gmd:individualName><gco:CharacterString/></gmd:individualName><gmd:organisationName><gco:CharacterString>Arizona Geological Survey</gco:CharacterString></gmd:organisationName><gmd:positionName><gco:CharacterString>missing</gco:CharacterString></gmd:positionName><gmd:contactInfo><gmd:CI_Contact><gmd:phone><gmd:CI_Telephone><gmd:voice><gco:CharacterString>520-770-3500</gco:CharacterString></gmd:voice></gmd:CI_Telephone></gmd:phone><gmd:address><gmd:CI_Address><gmd:deliveryPoint><gco:CharacterString>416 W. Congress St., Suite 100</gco:CharacterString></gmd:deliveryPoint><gmd:city><gco:CharacterString>Tucson</gco:CharacterString></gmd:city><gmd:administrativeArea><gco:CharacterString>AZ</gco:CharacterString></gmd:administrativeArea><gmd:postalCode><gco:CharacterString>85701</gco:CharacterString></gmd:postalCode><gmd:electronicMailAddress><gco:CharacterString>metadata@usgin.org</gco:CharacterString></gmd:electronicMailAddress></gmd:CI_Address></gmd:address></gmd:CI_Contact></gmd:contactInfo><gmd:role><gmd:CI_RoleCode codeList='http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodelists.xml#CI_RoleCode' codeListValue='distributor'>distributor</gmd:CI_RoleCode></gmd:role></gmd:CI_ResponsibleParty></gmd:distributorContact></gmd:MD_Distributor></gmd:distributor><gmd:transferOptions><gmd:MD_DigitalTransferOptions id='http___services_azgs_az_gov_ArcGIS_services_aasggeothermal_HIThermalSprings1_8_MapServer_WMSServer_request_GetCapabilities_service_WMS'><gmd:onLine><gmd:CI_OnlineResource><gmd:linkage><gmd:URL>http://services.azgs.az.gov/ArcGIS/services/aasggeothermal/HIThermalSprings1_8/MapServer/WMSServer?request=GetCapabilities&amp;service=WMS</gmd:URL></gmd:linkage><gmd:protocol><gco:CharacterString>OGC:WMS</gco:CharacterString></gmd:protocol><gmd:name><gco:CharacterString>Service Description</gco:CharacterString></gmd:name><gmd:description><gco:CharacterString>parameters:{layers:'ThermalSpring'}</gco:CharacterString></gmd:description><gmd:function><gmd:CI_OnLineFunctionCode codeList='http://www.fgdc.gov/nap/metadata/register/registerItemClasses.html#IC_88' codeListValue='381'>webService</gmd:CI_OnLineFunctionCode></gmd:function></gmd:CI_OnlineResource></gmd:onLine></gmd:MD_DigitalTransferOptions></gmd:transferOptions><gmd:transferOptions><gmd:MD_DigitalTransferOptions id='http___services_azgs_az_gov_ArcGIS_services_aasggeothermal_HIThermalSprings1_8_MapServer_WFSServer_request_GetCapabilities_service_WFS'><gmd:onLine><gmd:CI_OnlineResource><gmd:linkage><gmd:URL>http://services.azgs.az.gov/ArcGIS/services/aasggeothermal/HIThermalSprings1_8/MapServer/WFSServer?request=GetCapabilities&amp;service=WFS</gmd:URL></gmd:linkage><gmd:protocol><gco:CharacterString>OGC:WFS</gco:CharacterString></gmd:protocol><gmd:name><gco:CharacterString>Service Description</gco:CharacterString></gmd:name><gmd:description><gco:CharacterString>parameters:{typeName:'ThermalSpring'}</gco:CharacterString></gmd:description><gmd:function><gmd:CI_OnLineFunctionCode codeList='http://www.fgdc.gov/nap/metadata/register/registerItemClasses.html#IC_88' codeListValue='381'>webService</gmd:CI_OnLineFunctionCode></gmd:function></gmd:CI_OnlineResource></gmd:onLine></gmd:MD_DigitalTransferOptions></gmd:transferOptions><gmd:transferOptions><gmd:MD_DigitalTransferOptions id='http___services_azgs_az_gov_ArcGIS_rest_services_aasggeothermal_HIThermalSprings1_8_MapServer'><gmd:onLine><gmd:CI_OnlineResource><gmd:linkage><gmd:URL>http://services.azgs.az.gov/ArcGIS/rest/services/aasggeothermal/HIThermalSprings1_8/MapServer</gmd:URL></gmd:linkage><gmd:protocol><gco:CharacterString>ESRI</gco:CharacterString></gmd:protocol><gmd:name><gco:CharacterString>Service Description</gco:CharacterString></gmd:name><gmd:function><gmd:CI_OnLineFunctionCode codeList='http://www.fgdc.gov/nap/metadata/register/registerItemClasses.html#IC_88' codeListValue='381'>webService</gmd:CI_OnLineFunctionCode></gmd:function></gmd:CI_OnlineResource></gmd:onLine></gmd:MD_DigitalTransferOptions></gmd:transferOptions><gmd:transferOptions><gmd:MD_DigitalTransferOptions id='http___repository_stategeothermaldata_org_metadata_record_90e5aa8a743c04160c055efb026ced8e_file_hithermalsprings_20131118repo_zip'><gmd:onLine><gmd:CI_OnlineResource><gmd:linkage><gmd:URL>http://repository.stategeothermaldata.org/metadata/record/90e5aa8a743c04160c055efb026ced8e/file/hithermalsprings_20131118repo.zip</gmd:URL></gmd:linkage><gmd:name><gco:CharacterString>Zipped Excel Workbook containing Thermal Springs Data for the State of Hawaii</gco:CharacterString></gmd:name><gmd:function><gmd:CI_OnLineFunctionCode codeList='http://www.fgdc.gov/nap/metadata/register/registerItemClasses.html#IC_88' codeListValue='375'>download</gmd:CI_OnLineFunctionCode></gmd:function></gmd:CI_OnlineResource></gmd:onLine></gmd:MD_DigitalTransferOptions></gmd:transferOptions><gmd:transferOptions><gmd:MD_DigitalTransferOptions id='http___notifications_usgin_org_'><gmd:onLine><gmd:CI_OnlineResource><gmd:linkage><gmd:URL>http://notifications.usgin.org/</gmd:URL></gmd:linkage><gmd:name><gco:CharacterString>NGDS RSS feed for services notifications</gco:CharacterString></gmd:name><gmd:function><gmd:CI_OnLineFunctionCode codeList='http://www.fgdc.gov/nap/metadata/register/registerItemClasses.html#IC_88' codeListValue='375'>download</gmd:CI_OnLineFunctionCode></gmd:function></gmd:CI_OnlineResource></gmd:onLine></gmd:MD_DigitalTransferOptions></gmd:transferOptions></gmd:MD_Distribution></gmd:distributionInfo><gmd:metadataMaintenance><gmd:MD_MaintenanceInformation><gmd:maintenanceAndUpdateFrequency><gmd:MD_MaintenanceFrequencyCode codeList='http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#MD_MaintenanceFrequencyCode' codeListValue='IRREGULAR'>irregular								</gmd:MD_MaintenanceFrequencyCode></gmd:maintenanceAndUpdateFrequency><gmd:maintenanceNote><gco:CharacterString>This metadata record has been processed by the iso-19115-to-usgin-19115-data XSLT to ensure that all mandatory content for USGIN profile has been added.2013-11-04T12:00:00</gco:CharacterString></gmd:maintenanceNote></gmd:MD_MaintenanceInformation></gmd:metadataMaintenance></gmd:MD_Metadata>"
var doc = new dom().parseFromString(xml), urlString = '', flagSearch = 0;

var select = xpath.useNamespaces({"gmd": "http://www.isotc211.org/2005/gmd",  "gco": 'http://www.isotc211.org/2005/gco' });
console.log(select('//gmd:URL/text()', doc)[1].nodeValue );
var count = select('count(//gmd:URL/text())', doc);
console.log(count)
for (var i = 0, len = count; i < len; i++) {
    urlString = select('//gmd:URL/text()', doc)[i].nodeValue ;
    flagSearch = urlString.search("service=WFS");
    if (flagSearch > 0){
        console.log(urlString)
    }
    flagSearch = 0;
}

